{% extends 'base.html' %}
{% block title %}í”„ë¡œí•„ Â· Mega Coffee HR{% endblock %}
{% block nav_profile_active %}active{% endblock %}

{% block content %}
<div class="page-header">
  <h1>í”„ë¡œí•„</h1>
</div>

<div class="card">
  <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid #eef2f7;">
    <div style="position: relative; cursor: pointer;" onclick="document.getElementById('profileImageInput').click()">
      {% if user.profile.profile_image %}
      <img src="{{ user.profile.profile_image.url }}" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
      {% else %}
      <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: 700; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
        {{ user.username|first|upper }}
      </div>
      {% endif %}
      <div style="position: absolute; bottom: 0; right: 0; width: 28px; height: 28px; background: #2563eb; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
        <span style="font-size: 14px;">ğŸ“·</span>
      </div>
      <form id="profileImageForm" method="post" enctype="multipart/form-data" style="display: none;">
        {% csrf_token %}
        <input type="file" id="profileImageInput" name="profile_image" accept="image/*" onchange="document.getElementById('profileImageForm').submit()">
      </form>
    </div>
    <div>
      <h2 style="margin: 0 0 0.5rem 0; font-size: 1.5rem; font-weight: 700;">{{ user.username }}</h2>
      <div style="display: inline-block; background: #e0f2fe; color: #0369a1; padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600;">{{ user.profile.role }}</div>
    </div>
  </div>

  <div class="form-grid">
    <div class="form-field">
      <label>ğŸ‘¤ ì´ë¦„</label>
      <div style="padding: 10px 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">{{ user.username }}</div>
    </div>
    <div class="form-field">
      <label>ğŸ“§ ì´ë©”ì¼</label>
      <div style="padding: 10px 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">{{ user.email }}</div>
    </div>
    <div class="form-field">
      <label>ğŸ’¼ ì—­í• </label>
      <div style="padding: 10px 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">{{ user.profile.role }}</div>
    </div>
  </div>
  
  <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #eef2f7;">
    <a href="{% url 'accounts:profile_edit' %}" class="btn primary" style="padding: 0.75rem 1.5rem; text-decoration: none; display: inline-block;">âœï¸ í”„ë¡œí•„ ìˆ˜ì •</a>
  </div>
</div>

<div class="card">
  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
    <div style="display: flex; align-items: center; gap: 0.75rem;">
      <div style="width: 40px; height: 40px; background: #dbeafe; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.25rem;">ğŸª</div>
      <h2 style="margin: 0;">ë‚´ ë§¤ì¥</h2>
    </div>
    {% if not user.store %}
    <button class="btn" style="font-size: 0.875rem;">+ ë§¤ì¥ ì¶”ê°€</button>
    {% endif %}
  </div>
  
  <div style="display: flex; flex-direction: column; gap: 0.75rem;">
    {% if user.store %}
    <div style="padding: 1rem; background: #f8fafc; border: 2px solid #2563eb; border-radius: 10px; display: flex; align-items: center; justify-content: space-between;">
      <div>
        <div style="font-weight: 600; margin-bottom: 0.25rem;">{{ user.store.name }}</div>
        <div style="font-size: 0.875rem; color: #64748b;">{{ user.store.address }}</div>
      </div>
      <span class="badge" style="background: #2563eb; color: white;">ëŒ€í‘œ ë§¤ì¥</span>
    </div>
    {% else %}
    <div style="padding: 2rem; text-align: center; color: #64748b;">
      ë“±ë¡ëœ ë§¤ì¥ì´ ì—†ìŠµë‹ˆë‹¤.
    </div>
    {% endif %}
  </div>
  <div style="margin-top: 2rem; text-align: right;">
    <form action="{% url 'accounts:logout' %}" method="post" style="display: inline;">
        {% csrf_token %}
        <button type="submit" style="background: none; border: none; color: #ef4444; font-size: 0.875rem; text-decoration: underline; cursor: pointer; font-weight: 600;">
            ì‹œìŠ¤í…œì—ì„œ ë¡œê·¸ì•„ì›ƒ
        </button>
    </form>
  </div>
</div>
{% endblock %}